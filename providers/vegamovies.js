/**
 * vegamovies - Built from src/vegamovies/
 * Generated: 2026-01-08T20:22:54.908Z
 */
var B=Object.create;var b=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols,G=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var A=(e,t,o)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,M=(e,t)=>{for(var o in t||(t={}))H.call(t,o)&&A(e,o,t[o]);if(T)for(var o of T(t))W.call(t,o)&&A(e,o,t[o]);return e};var j=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of K(t))!H.call(e,s)&&s!==o&&b(e,s,{get:()=>t[s],enumerable:!(n=I(t,s))||n.enumerable});return e};var E=(e,t,o)=>(o=e!=null?B(G(e)):{},j(t||!e||!e.__esModule?b(o,"default",{value:e,enumerable:!0}):o,e));var $=(e,t,o)=>new Promise((n,s)=>{var i=a=>{try{p(o.next(a))}catch(f){s(f)}},x=a=>{try{p(o.throw(a))}catch(f){s(f)}},p=a=>a.done?n(a.value):Promise.resolve(a.value).then(i,x);p((o=o.apply(e,t)).next())});var V=E(require("cheerio-without-node-native"));var R="68e094699525b18a70bab2f86b1fa706",_="https://vegamovies.gt",q="Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Mobile Safari/537.36";var J={"User-Agent":q,Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",cookie:"xla=s4t"};function v(o){return $(this,arguments,function*(e,t={}){console.log(`[VegaMovies] Fetching: ${e}`);let n=yield fetch(e,M({headers:M(M({},J),t.headers)},t));if(!n.ok)throw new Error(`HTTP error ${n.status} for ${e}`);return yield n.text()})}function D(o){return $(this,arguments,function*(e,t={}){let n=yield v(e,t);return JSON.parse(n)})}function F(e,t){return $(this,null,function*(){let o=t==="series"||t==="tv",s=`https://api.themoviedb.org/3/${o?"tv":"movie"}/${e}?api_key=${R}`;console.log(`[VegaMovies] Fetching TMDB details from: ${s}`);try{let i=yield D(s);return o?{title:i.name,year:i.first_air_date?i.first_air_date.split("-")[0]:""}:{title:i.title,year:i.release_date?i.release_date.split("-")[0]:""}}catch(i){return console.error("[VegaMovies] Failed to fetch metadata",i),null}})}var U=E(require("cheerio-without-node-native"));function P(e,t,o,n){return $(this,null,function*(){let s=o==="movie"?`${e} ${t}`:`${e} Season ${n}`,i=`${_}/page/1/?s=${encodeURIComponent(s)}`,x=yield v(i),p=U.default.load(x),a=N(p,e,t,o,n);return a||(console.log("[VegaMovies] Strict search failed, trying general search..."),i=`${_}/page/1/?s=${encodeURIComponent(e)}`,x=yield v(i),p=U.default.load(x),a=N(p,e,t,o,n)),a})}function N(e,t,o,n,s){let i=null,x=t.toLowerCase();return e("article.entry").each((p,a)=>{let f=e(a).find("h2 > a").text()||"",h=e(a).find("a").attr("href"),l=f.toLowerCase();if(l.includes(x))if(n!=="movie"){let m=`season ${s}`,d=`season 0${s}`;l.includes(m)||l.includes(d)?(!i||!i.title.includes(m)&&!i.title.includes(d))&&(i={link:h,title:l,priority:10}):(l.includes("series")||l.includes("complete"))&&(!i||i.priority<5)&&(i={link:h,title:l,priority:5})}else o&&l.includes(o)?i={link:h,title:l,priority:10}:i||(i={link:h,title:l,priority:1})}),i==null?void 0:i.link}var C=E(require("cheerio-without-node-native"));function S(e){return $(this,null,function*(){console.log(`[VCloud] Extracting: ${e}`);try{let t=e,o=yield v(e),n=C.default.load(o);if(e.includes("api/index.php")){let h=n("div.main h4 a").attr("href");h&&(t=h,o=yield v(t),n=C.default.load(o))}let s=n('script:contains("var url =")').html(),i=null;if(s){let h=s.match(/var url = '([^']+)'/);h&&(i=h[1])}if(!i)return console.log("[VCloud] Could not find redirect URL in script."),[];console.log(`[VCloud] Following redirect: ${i}`);let x=yield v(i),p=C.default.load(x),a=[],f=p("div.card-header").text().trim()||"Unknown";return p("div.card-body h2 a.btn").each((h,l)=>{let m=n(l).attr("href"),d=n(l).text(),c=d.toLowerCase(),r=d.match(/(\d{3,4}p)/),g=r?r[1]:f.match(/(\d{3,4}p)/)?f.match(/(\d{3,4}p)/)[1]:"Unknown",u="Server",w=d.match(/\[(.*?)\]/);w?u=w[1].replace("Server","").replace(":","").trim():c.includes("pixeldrain")?u="Pixeldrain":c.includes("fsl")?u="FSL":c.includes("10gbps")&&(u="10Gbps"),u===""&&(u="Server");let k=`VegaMovies ${g} [${u}]`;(c.includes("fsl")||c.includes("server")||c.includes("original")||c.includes("cloud")||c.includes("pixeldrain")||m.endsWith(".mkv")||m.endsWith(".mp4"))&&a.push({name:`VegaMovies ${u}`,title:k,url:m,quality:g})}),a}catch(t){return console.error(`[VCloud] Error: ${t.message}`),[]}})}function Y(e,t,o,n){return $(this,null,function*(){try{let s=yield F(e,t);if(!s)return[];let{title:i,year:x}=s;console.log(`[VegaMovies] Request: ${i} (${x}) S${o}E${n}`);let p=yield P(i,x,t,o);if(!p)return console.log("[VegaMovies] No results found on provider site."),[];console.log(`[VegaMovies] Found page: ${p}`);let a=yield v(p),f=V.default.load(a),h=[];if(t==="movie"){let l=[];f("p > a, h3 > a, h4 > a").each((m,d)=>{let c=f(d).attr("href"),r=f(d).text();c&&(r.includes("Download")||r.includes("V-Cloud")||r.includes("480p")||r.includes("720p")||r.includes("1080p"))&&c.startsWith("http")&&l.push({text:r,link:c})});for(let m of l)try{if(m.link.includes("vcloud")||m.link.includes("hubcloud")){let d=yield S(m.link);h.push(...d)}else{let d=yield v(m.link),c=V.default.load(d),r=[];c("a").each((g,u)=>{let w=c(u).attr("href"),k=c(u).text()||"";w&&(k.includes("V-Cloud")||w.includes("vcloud")||w.includes("hubcloud"))&&r.push(w)});for(let g of r){let u=yield S(g);h.push(...u)}}}catch(d){}}else{let l=f("h3, h4, h5").filter((d,c)=>{let r=f(c).text();return r.includes("Zip")?!1:r.toLowerCase().includes(`season ${o}`)||r.toLowerCase().includes(`season 0${o}`)}),m=[];l.each((d,c)=>{let r=f(c).next(),g=0;for(;r.length&&g<5&&!r.is("h3, h4, h5");)r.find("a").each((w,k)=>{let y=f(k).attr("href"),L=f(k).text();y&&(L.includes("V-Cloud")||L.includes("Episode")||L.includes("Download"))&&m.push({text:L,link:y})}),r=r.next(),g++});for(let d of m)try{let c=yield v(d.link),r=V.default.load(c),g=[];r("p > a").each((w,k)=>{let y=r(k).attr("href");y&&(y.includes("vcloud")||y.includes("hubcloud"))&&g.push(y)});let u=n-1;if(u>=0&&u<g.length){let w=yield S(g[u]);h.push(...w)}}catch(c){}}return h}catch(s){return console.error(`[VegaMovies] Error: ${s.message}`),[]}})}module.exports={getStreams:Y};
